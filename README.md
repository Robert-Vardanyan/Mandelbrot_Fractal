# Визуализация фрактала Мандельброта

Этот репозиторий посвящен изучению способов оптимизации вычислений и увеличения их скорости в Python. В рамках проекта была проведена реализация кода на Python, используя различные библиотеки, такие как NumPy, Numba и Taichi. В качестве примера выбрана задача вычисления множества Мандельброта.

## Содержание
- [Теория](#теория)
  - [Что такое фрактал Мандельброта?](#что-такое-фрактал-мандельброта)
  - [Формула для фрактала Мандельброта](#формула-для-фрактала-мандельброта)
  - [Комплексные числа: что это такое?](#комплексные-числа-что-это-такое)
- [Реализация кода](#реализация-кода)
  - [Реализация с использованием обычного Python](#реализация-с-использованием-обычного-python)
  - [Реализация с использованием NumPy](#реализация-с-использованием-numpy)
  - [Реализация с использованием Numba](#реализация-с-использованием-numba)
  - [Реализация с использованием Taichi](#реализация-с-использованием-taichi)
  - [Сравнение производительности](#сравнение-производительности)
  - [Заключение](#заключение)
- [Установка](#установка)
- [Управление](#управление)
- [Примеры](#примеры)


## Теория

### Что такое фрактал Мандельброта?

Фрактал Мандельброта — это множество точек на комплексной плоскости, которые не уходят в бесконечность при многократном применении определённой функции. Он был открыт французским математиком Бенуа Мандельбротом и является одним из самых известных и изучаемых фракталов.

![screenshot_2834](https://github.com/user-attachments/assets/f2c2eae9-097c-4ef2-8a68-66e048037ba4)

### Формула для фрактала Мандельброта.

![1](https://github.com/user-attachments/assets/bf943ff1-3978-4dad-a440-66896521f310)

Точки, для которых \(z_n\) остаётся ограниченным после большого количества итераций, принадлежат множеству Мандельброта. Другими словами, если после многократного возведения в квадрат и добавления константы \(z_n\) не уходит в бесконечность, точка считается частью фрактала.

### Комплексные числа: что это такое?

![2](https://github.com/user-attachments/assets/23cf33be-c374-47c1-9e83-8c831b243155)
![3](https://github.com/user-attachments/assets/387d4227-1614-46bd-aa5c-6c220591dbda)

Комплексные числа можно представить как точки на плоскости, где ось \(x\) — это действительная часть, а ось \(y\) — это мнимая часть.

## Реализация кода

### Реализация с использованием обычного Python

Первый подход — это классическая реализация на чистом Python. Хотя этот метод прост в реализации и отлично подходит для понимания логики фрактала, он не отличается высокой производительностью.

**Плюсы:**
- Легкость написания и отладки кода.

**Минусы:**
- Низкая производительность, особенно для больших изображений.

### Реализация с использованием NumPy

NumPy значительно ускоряет вычисления за счёт использования векторизации и работы с массивами. Это позволяет значительно сократить время расчётов, особенно для фракталов с большим количеством итераций.

**Плюсы:**
- Оптимизация вычислений благодаря векторизации.

**Минусы:**
- Код становится сложнее для понимания по сравнению с чистым Python.

### Реализация с использованием Numba

Numba предоставляет возможность JIT-компиляции кода, что позволяет существенно ускорить выполнение программы. Этот подход компилирует Python-код в машинный код во время выполнения, что делает его значительно быстрее.

**Плюсы:**
- Высокая производительность благодаря JIT-компиляции.

**Минусы:**
- Ограничения на использование некоторых функций Python.

### Реализация с использованием Taichi

Taichi — это высокопроизводительный фреймворк для численных вычислений, который позволяет использовать параллельные вычисления на CPU и GPU. Однако, Taichi не поддерживает тип данных для комплексных чисел, что требует небольших изменений в формуле.

### Проблема с Taichi: отсутствие поддержки комплексных чисел

Так как Taichi не поддерживает комплексные числа, мы заменяем операции с ними на работу с векторами. В формуле \(z^2\), возведение в квадрат теперь сводится к отдельным операциям над действительной и мнимой частями числа, что эквивалентно векторным операциям. Эта модификация позволяет эффективно обрабатывать вычисления в Taichi, сохраняя при этом производительность.

![taichi](https://github.com/user-attachments/assets/74582082-581c-4a79-9bfd-7c1a332d740c)

**Плюсы:**
- Высокая производительность благодаря параллелизации на CPU и GPU.
- Возможность работы с большими объёмами данных.

**Минусы:**
- Необходимость модификации формул для работы с комплексными числами.
- Сложность реализации по сравнению с другими подходами.

### Сравнение производительности

| Метод           | Время выполнения |
|-----------------|------------------|
| Обычный Python  | Медленное        |
| NumPy           | Быстрое          |
| Numba           | Очень быстрое    |
| Taichi          | Максимальная скорость (особенно на GPU) |

### Заключение

Каждый из методов имеет свои преимущества и недостатки. Для простых задач может подойти реализация на чистом Python, но для задач, требующих высокой производительности, лучше всего подходят Numba и Taichi. Несмотря на отсутствие поддержки комплексных чисел в Taichi, это легко компенсируется использованием векторных операций, что позволяет достичь максимальной скорости вычислений, особенно при использовании GPU.

## Установка

Для запуска проекта необходимо установить Python и зависимости, указанные в `requirements.txt`. Выполните следующие шаги для настройки:

1. **Клонируйте репозиторий**:
    ```bash
    git clone https://github.com/Robert-Vardanyan/Mandelbrot_Fractal.git
    cd Mandelbrot_Fractal
    ```

2. **Настройте виртуальное окружение**:
    ```bash
    python -m venv venv
    source venv/bin/activate  # Для Linux/Mac
    venv\Scripts\activate  # Для Windows
    ```

3. **Установите необходимые зависимости**:
    ```bash
    pip install -r requirements.txt
    ```

4. **Запустите проект**:
    ```bash
    python 4_taich.py
    ```
    
## Управление

В вашем коде управление фракталом осуществляется с помощью клавиш на клавиатуре. Вот подробное описание каждой функции управления:

### Перемещение

- **`A`**: Перемещает фрактал влево. Увеличивает смещение по оси X на значение `vel * delta_time()`.
- **`D`**: Перемещает фрактал вправо. Уменьшает смещение по оси X на значение `vel * delta_time()`.
- **`W`**: Перемещает фрактал вверх. Увеличивает смещение по оси Y на значение `vel * delta_time()`.
- **`S`**: Перемещает фрактал вниз. Уменьшает смещение по оси Y на значение `vel * delta_time()`.

### Масштабирование

- **`UP ARROW`**: Увеличивает масштаб фрактала. Уменьшает значение `zoom` и увеличивает скорость перемещения (`vel`) в зависимости от текущего масштаба.
- **`DOWN ARROW`**: Уменьшает масштаб фрактала. Увеличивает значение `zoom` и уменьшает скорость перемещения (`vel`) в зависимости от текущего масштаба.

### Количество итераций

- **`LEFT ARROW`**: Уменьшает количество итераций для расчёта фрактала. Значение `max_iter` уменьшается на единицу, но не опускается ниже 2.
- **`RIGHT ARROW`**: Увеличивает количество итераций для расчёта фрактала. Значение `max_iter` увеличивается на единицу, но не превышает установленный лимит (`max_iter_limit`).

### Скриншоты

- **`X`**: Создаёт скриншот текущего состояния экрана и сохраняет его в папку `screenshots` с именем, основанным на текущем времени в миллисекундах.



# Примеры

Фрактал Мандельброта имеет уникальные визуальные особенности: при увеличении, его структура повторяется бесконечное количество раз, сохраняя свои формы, что является ключевой чертой любого фрактала.

![screenshot_2834](https://github.com/user-attachments/assets/70652769-aeda-4caf-aecf-eb4a4c0c383f)
![screenshot_17680](https://github.com/user-attachments/assets/e0793994-d97c-4f3b-8b92-a130febf2f86)
![screenshot_42549](https://github.com/user-attachments/assets/667d6a5b-364a-4d74-8273-893cf933cd17)
![screenshot_61854](https://github.com/user-attachments/assets/7935627b-0cd0-47ff-91eb-9fab8a3f6e9b)
![screenshot_95609](https://github.com/user-attachments/assets/a9536d23-edc0-4eb9-86b5-e4928b81ec76)
